
<div id="iquota_inner" class="space-y-4">

<div class="flex justify-between items-center mb-2">
  <span class="text-sm font-medium text-gray-700">{{user_quota.path}}</span>
  <span class="text-sm text-gray-600">{{user_quota.used}} of {{user_quota.limit}}</span>
</div>
<div class="w-full bg-gray-200 rounded-full h-10 overflow-hidden">
  <div class="bg-blue-600 h-full flex items-center justify-center text-white text-sm font-medium transition-all duration-300" style="width:{{user_quota.percent_used}}%;">
    {{user_quota.percent_used}}%
  </div>
</div>

{% for key, value in group_quotas.items %}
    <div class="flex justify-between items-center mb-2">
      <span class="text-sm font-medium text-gray-700">{{value.path}}</span>
      <span class="text-sm text-gray-600">{{value.used}} of {{value.limit}}</span>
    </div>
    <div class="w-full bg-gray-200 rounded-full h-10 overflow-hidden">
      <div class="bg-blue-600 h-full flex items-center justify-center text-white text-sm font-medium transition-all duration-300" style="width:{{value.percent_used}}%">
        {{value.percent_used}}%
      </div>
    </div>

{% endfor %}

    <div id="iquota_inner_button" class="mt-6">
        <button id="quota-button" type="button" class="inline-flex items-center px-4 py-2 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200">
          <i class="fas fa-sync mr-2" aria-hidden="true"></i> Refresh Quota
        </button>
    </div>
</div>

<script>

        $("#quota-button").click(function() {

            $('#iquota_inner_button').html('<button id="quota-button" type="button" class="inline-flex items-center px-4 py-2 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200"><i class="fas fa-sync fa-spin fa-fw mr-2" aria-hidden="true"></i> Refreshing Quota <span class="sr-only">...</span></button>');

            $.ajax({
                url: "{% url 'get-isilon-quota' %}",
                method: "POST",
                data: {
                    csrfmiddlewaretoken: "{{ csrf_token }}",
                },
                success: function(data) {

                    $('#iquota_inner').html(data);
                },
                error: function(data) {
                    $('#iquota_inner').html('<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4"><div class="flex"><div class="flex-shrink-0"><i class="fas fa-info-circle text-yellow-400" aria-hidden="true"></i></div><div class="ml-3"><p class="text-sm text-yellow-800">Error refreshing quota information.</p></div></div></div>');
                },
            });
        });

    </script>
